---
title: 【Web】Webとネットワーク技術について図を使って説明してみた
tags:
  - Network
  - HTTP
  - Web
  - HTTPS
private: false
updated_at: '2022-03-16T23:01:36+09:00'
id: 86f4a8622889fa2d076e
organization_url_name: null
slide: false
ignorePublish: false
---
## Webを実現するコンピューターネットワーク

- クライアントとサーバー
  - **サーバー**：ネットワーク上で情報やサービスをを提供する役割を持つコンピューター
  - **クライアント**：サーバーから提供された情報やサービスを利用する役割を持つコンピューター 
![p35-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/11f74f40-25f0-9159-3919-c4727ccdb31e.png)

- インターネットの全体像
  - Webサイトを閲覧する場合、**インターネットサービスプロバイダー**が提供するサービスを利用して、インターネットへ接続する必要がある。
  - インターネットは、自宅や会社などの小さな範囲のネットワークが1つ1つお互いに接続して、世界中のネットワークがつながった環境のこと。
  - インターネットサービスプロバイダー(略してプロバイダーやISP)は、各国に複数存在し、プロバイダー同士で接続し合うことで世界中が1つのネットワークとして形成され、インターネットとして成り立っている。
  - 自宅、会社内など限られた範囲内のコンピューターネットワークを**LAN**という。無線LANもその一種。

![p35-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/4056efe8-baa1-13b5-7316-dae6f5c94489.png)

## インターネットの標準プロトコル
- **プロトコル**とは
  - ネットワークに接続された機器同士が通信するときの、あらかじめ決められた共通のルールや手順。
  - お互いに同じプロトコルを利用することでデータのやりとりが可能になる。


- プロトコルを狼煙で例えると、
![p37-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/7aafbe4a-127b-6a2e-3372-3e07a85dade0.png)

- コンピューター同士の通信でも、お互い認識しているプロトコルを利用することで情報を伝達を行うことができる。

![p37-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/741c3d06-f4b4-0bb6-a472-0a841a6374ea.png)


- **TCP/IP(Transmission Control Protocol/Internet Protocol)** とは
  - インターネットにおける様々なサービスを実現するためのプロトコルの集まり。
  - インターネットへのアクセスが可能なパソコン、スマホなどのコンピューターはすべてTCP/IPに対応している。
  - HTTPもTCP/IPの一部。

|プロトコル|プロトコル名|用途|
|:--:|:--:|:--:|
|HTTP|HyperText Transfer Protocol|データ送受信用|
|FTP|File Transfer Protocol|ファイル送受信用|
|SMTP|Simple Mail Transfer Protocol|メール送受信用|
|POP|Post Office Protocol|メール受信用|

## TCP/IP
- TCP/IPは役割ごとに、以下の4つの階層(レイヤー)に分かれています。

|レイヤー名|役割用途|プロトコル例|
|:--:|:--:|:--:|
|アプリケーション層(レイヤー4)|アプリケーションごとのやりとりを規定|HTTP,SMTP,FTPなど|
|トランスポート層(レイヤー3)|データの分割や品質保証を規定|TCP,UDP|
|インターネット層(レイヤー2)|ネットワーク間の通信を規定|IP,ICMPなど|
|ネットワークインターフェース層(レイヤー1)|コネクタ形状や周波数といったハードウェアに関する規定|イーサネット,Wi-Fiなど|

- アプリケーション層から見たデータの流れ
  - プロトコルを階層化することで、各階層でそれぞれのプロトコルに従って処理を行うことで、他の階層の処理がわからなくても一連の処理(通信)が行える。
  - アプリケーション層であれば、お互いのアプリケーション層同士で処理を行っている。

![p39-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/c28f64e2-9091-558e-ed46-e5e1f7ccd89a.png)

- **TCPとUDP**
  - アプリケーション層のやりとりに応じて実際にデータの転送処理しているトランスポート層に位置している。
  - **TCP(Transmission Control Protocol)**
    - 分割されたデータの順序や欠落をチェックしている。
    - Webサイトやメールなど、データの損失が起きると困るようなアプリケーションで利用。
    - 送信側と受信側でお互いに確認を取りながら通信をするコネクション型

![p39-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/913c2617-ace4-51a1-3119-8a0b439358d2.png)

  - **UDP(User Datagram Protocol)** 
    - 分割されたデータの順序や欠落を保証していない。
    - 信頼性は低いものの、通信の手続きが簡略化されており、効率的に通信できるため、動画ストリーミングなどで利用。
    - 送信側と受信側でお互いに確認を取らないコネクションレス型

![p39-3.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/5b64c620-de0f-5a2f-9bff-c8afd37aa93a.png)

## IPアドレスとポート番号
- **IPアドレス**
  - インターネットに接続されたコンピューターを特定し、データの行き先を管理するために利用されている識別番号。
  - インターネットにおいて世界中で一つだけ。世界中で利用できる「住所」のようなもの。
  - 現在は32ビットの数字で表現されるIPv4が主に使われている。
  - IPv4は、「ドット」で8ビットずつ4つに区切られ、以下のように10進数で表記する。

![p41-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/cbe5eed3-7c35-5724-afa6-868e20523924.png)

- IPアドレスは用途と場所によって、グローバルIPとプライベートIPの2つに分類される。
  - 電話番号でいうと、外線番号(グローバルIP)、内線番号(プライベートIP) 

|IPアドレスの分類|利用用途|管理|説明|
|:--:|:--:|:--:|:--:|
|グローバルIPアドレス|インターネットでの通信で利用される|ICANN(Internet Corporation for Names and Numbers)およびその下部組織|インターネットにおいて一意である必要があるため、グローバルIPアドレスは自由に利用できない|
|プライベートIPアドレス|会社内などのLAN内での通信の際に利用される|個人や会社内で自由にIPアドレスを利用できる|・同一LAN内で同じIPアドレスを利用することはできないが、違うLANであれば同じIPアドレスを利用できる<br>・プライベートIPアドレスだけではインターネットに接続できないため、ルーター等の機器で「プライベートIPアドレス」⇔「グローバルIPアドレス」を変換する必要がある|

- **ポート番号**
  - コンピューター内部にある各サービスを識別するための番号。
  - マンションやアパートでいう部屋番号。
  - Webサーバーは80番。

![p41-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/5cbe4fdf-9d51-e97a-abf4-3ea51fb8a801.png)

|ポート番号の範囲|ポートの分類|説明|
|:--:|:--:|:--:|
|0~1023|ウェルノウンポート|一般的なサーバーソフトウェアで使用|
|1024~49151|レジスタードポート|メーカー独自のサーバーソフトウェアで利用|
|49152~65535|ダイナミックポート|クライアント側でランダム、自由に使用|

## URLとドメイン
- **URL(Uniform Resource Locator)**
  - Webサイトを閲覧するときにhttp\://example.jp/index.htmlなどの文字列。
  - URLはスキーム名、ホスト名(ドメイン名)、ポート番号、パス名などで構成されます。

![p43-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/d6252165-e03f-057d-d299-da4a1540c6b7.png)

①スキーム名：プロトコルを指定。たいていはプロトコル名と同じ名前が使われる。
②ホスト名(ドメイン名)：接続先のサーバーを指定。IPアドレスで指定することも可能。
③ポート番号：接続先のサーバーのポート番号を指定。省略可で通常は指定しない。指定しない場合は下表のポート番号が適用される。
④パス名：接続先のサーバー上のディレクトリやファイルを指定。

- 主なスキーム名

|スキーム名|説明|
|:--:|:--:|
|http|Webサイトを閲覧する際に利用されるプロトコル|
|https|httpを暗号化(SSL)しているプロトコル|
|ftp|ファイル転送で使用するプロトコル|

- 省略時に使われるポート番号

|プロトコル|ポート番号|
|:--:|:--:|
|http|80|
|https|443|
|ftp|20(データ転送)および、21(制御用)|

- **ドメイン**
  - IPアドレスの別名として扱われる文字列。
  - グローバルIPアドレスと同様に一意。 
  - ドメイン名とホスト名は同じ意味で使用される場合もあるが、厳密には、
    - ドメイン名：ネットワークを特定するための文字列。
    - ホスト名：ネットワーク上のコンピューターに付ける識別用の文字列。

![p43-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/223a598c-f02d-39ac-8e62-38082f41e277.png)

## DNS
- ドメインとIPアドレスの変換
  - ドメインを利用してコンピューターへ接続するには、ドメインをIPアドレスへ変換する必要がある。
  - そのための仕組みが**DNS(Domain Name System)** 。
  - この仕組は氏名から電話番号を知るために電話帳を使うことに似ている。
  - DNSサーバーが行っている「ドメインとIPアドレスを紐付ける」ことを**名前解決**という。

![p45-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/3c172e74-cc26-73ca-f905-4bc3e99d4d8a.png)

- IPアドレスの問い合わせ
  - URLにドメインが利用されている場合は、必ずDNSサーバーへIPアドレスの問い合わせを行っている。
  - ドメインは「.」(ドット)で区切られた階層構造になっており、それぞれの階層にDNSサーバーがある。
  - 各DNSサーバーは同階層のドメインとIPアドレスの紐付けと、下階層に位置するDNSサーバーの管理を行っている。 

![p45-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/c63d2582-7667-ebec-a222-2eb37a229b47.png)

## HTTP
- **HTTP(HyperText Transfer Protocol)** 
  - クライアント(Webブラウザ)とサーバー(Webサーバー)間においてWebコンテンツを送受信するためのプロトコル。
- クライアントとサーバー間のやりとり
![p47-1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/e5a180ab-5691-1028-0caa-58d61ac540d5.png)

- Webサイト閲覧において、WebブラウザからWebサーバーに対してデータを要求した際は、
  - アプリケーション層：HTTP
  - トランスポート層：TCP
  - インターネット層：IP
  - ネットワークインターフェース層：イーサネットプロトコル
が利用される。 

![p47-2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2263192/278745a1-8439-8ed0-072d-ca5f22f2385f.png)

***
参考：[Web技術の基本](https://www.google.com/aclk?sa=L&ai=DChcSEwjgv4G7p532AhUYqZYKHYENBo0YABAEGgJ0bA&ae=2&sig=AOD64_0KL0kN9sFH6u9wF-KLnpvnbthrTA&ctype=5&q=&ved=2ahUKEwjuovu6p532AhWpMHAKHZwsAGQQ9aACegQIAhBD&adurl=)
























